AWSTemplateFormatVersion: "2010-09-09"
Description: CloudWatch log group. Built from a Production Pipeline.
Parameters:
  Namespace:
    Description: Prefix for all resources generated by the pipeline
    Type: String

Resources:
  FunctionLogGroup:
    Type: AWS::Logs::LogGroup
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Properties:
      LogGroupName: !Sub "/aws/lambda/${Namespace}"
      RetentionInDays: 90

  LogGroup:
    Type: AWS::Logs::LogGroup
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Properties:
      LogGroupName: !Sub ${Namespace}-service
      RetentionInDays: 7

  AccessLogGroup:
    Type: AWS::Logs::LogGroup
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Properties:
      LogGroupName: !Sub /${Namespace}/access-logs
      RetentionInDays: 7

Outputs:
  LogGroup:
    Value: !Ref LogGroup
  FunctionLogGroup:
    Value: !Ref FunctionLogGroup
  AccessLogGroupArn:
    Value: !GetAtt AccessLogGroup.Arn
